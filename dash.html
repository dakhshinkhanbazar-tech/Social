<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <style>
        body { background: #e5ddd5; font-family: sans-serif; padding: 10px; margin: 0; }
        .header { background: #075e54; color: white; padding: 10px; font-weight: bold; }
        .box { background: white; padding: 10px; border: 1px solid #ccc; margin-top: 10px; }
        .user-link { display: block; padding: 12px; border-bottom: 1px solid #eee; color: #075e54; text-decoration: none; font-weight: bold; background: #f9f9f9; margin-top: 5px; }
        input { width: 70%; padding: 10px; border: 1px solid #ddd; }
        button { background: #075e54; color: white; border: none; padding: 10px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
    <div class="header">Welcome: <span id="me"></span></div>
    
    <div class="box">
        <input type="text" id="searchInput" placeholder="Enter Name...">
        <button onclick="searchUser()">Search</button>
        <div id="results" style="margin-top:15px;"></div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // Firebase Configuration
        var config = {
            apiKey: "AIzaSyCvQ4ti0RjqmTCUZ5g5dXua_vjGNqqlyeg",
            databaseURL: "https://social-794e8-default-rtdb.firebaseio.com",
            projectId: "social-794e8"
        };
        firebase.initializeApp(config);
        var db = firebase.database();

        // Get My Name from URL
        var params = new URLSearchParams(window.location.search);
        var myName = params.get('user');
        document.getElementById('me').innerText = myName;

        function searchUser() {
            var q = document.getElementById('searchInput').value.toLowerCase();
            var resDiv = document.getElementById('results');
            resDiv.innerHTML = "Searching...";

            // ‡¶´‡¶æ‡ßü‡¶æ‡¶∞‡¶¨‡ßá‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü ‡¶Ü‡¶®‡¶æ (‡¶Ø‡¶¶‡¶ø ‡¶°‡¶æ‡¶ü‡¶æ‡¶¨‡ßá‡¶∏‡ßá ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶•‡¶æ‡¶ï‡ßá)
            // ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶ö‡ßç‡¶Ø‡¶æ‡¶ü ‡¶Ü‡¶á‡¶°‡¶ø ‡¶•‡ßá‡¶ï‡ßá‡¶ì ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßá ‡¶™‡ßá‡¶§‡ßá ‡¶™‡¶æ‡¶∞‡¶ø
            db.ref("users").once("value", function(snapshot) {
                var html = "<strong>Results:</strong>";
                var found = false;
                snapshot.forEach(function(child) {
                    var uName = child.val().name;
                    if(uName.toLowerCase().includes(q) && uName !== myName) {
                        html += '<a class="user-link" href="chat.html?me='+encodeURIComponent(myName)+'&friend='+encodeURIComponent(uName)+'">üí¨ Chat with '+uName+'</a>';
                        found = true;
                    }
                });
                if(!found) html = "No user found!";
                resDiv.innerHTML = html;
            });
        }
    </script>
</body>
</html>
